
:root{
  --bg:#ffffff;
  --fg:#222;
  --muted:#666;
  --border:#e2e2e7;
}

*{box-sizing:border-box;}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;margin:24px;color:var(--fg);background:var(--bg);}
header h1{margin:0 0 6px 0;font-weight:800;font-size:2rem;letter-spacing:.2px;}
.caption{margin:0 0 16px 0;color:#555;max-width:980px;}

.controls{display:flex;gap:12px;align-items:center;margin-bottom:12px;flex-wrap:wrap;}
.sort-group{display:flex;gap:8px;flex-wrap:wrap;}
button{padding:6px 10px;border:1px solid var(--border);background:#f6f7f9;border-radius:8px;cursor:pointer;}
button.btn-on{font-weight:700;text-decoration:underline;background:#eef1f6;}
button:focus{outline:2px solid #bcd;}

.layout{display:flex;gap:20px;align-items:flex-start;}
#chart{position:relative;}

.legend-panel{min-width:240px;max-width:260px;border:1px solid var(--border);border-radius:10px;padding:10px;background:#fafbfc;position:sticky;top:16px;}
.legend-title{font-weight:700;margin-bottom:6px;}
.legend{display:flex;gap:10px;flex-direction:column;}
.legend-item{display:flex;align-items:center;gap:8px;cursor:pointer;user-select:none;padding:6px;border-radius:8px;transition:background .15s;}
.legend-item:hover{background:#f5f5f7;}
.legend-swatch{width:14px;height:14px;border-radius:3px;border:1px solid #00000033;flex:0 0 auto;}
.legend-label{flex:1;}
.legend-item input[type="checkbox"]{transform:translateY(1px);}

.legend-instruction{margin-top:6px;color:#666;font-size:12px;}

.tooltip{
  position:fixed;
  z-index:9999;
  pointer-events:none;
  background:white;
  border:1px solid #d0d0d6;
  border-radius:10px;
  padding:10px 12px;
  font-size:12px;
  box-shadow:0 8px 24px rgba(0,0,0,0.18);
  max-width:280px;
  line-height:1.4;
}
.tooltip .sparkline{margin-top:8px;border-top:1px dashed #e1e1e6;padding-top:6px;}
.tooltip .delta{color:#333;margin-top:4px;}

.axis path,.axis line{stroke:#000;shape-rendering:crispEdges;stroke-opacity:.4;}
.tick text{font-size:11px;}
.x-axis .tick text{transform:rotate(-45deg);text-anchor:end;}
.y-label{font-size:12px;fill:#333;}

.year-group{transition:opacity .12s;}
.year-group.dim{opacity:.22;}

.tooltip .sparkline-title{margin-top:6px;font-size:11px;color:#555;}
